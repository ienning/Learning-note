[TOC]

# 计网

## 第1章 计算机网络体系结构

### 1.1 计算机网络概述

#### 1.1.1 计算机网络的概念

计算机网络是一些互联的，自治的计算机系统的集合。

#### 1.1.2 计算机网络的组成

1. 从组成部分看，一个完整的计算机网络主要由硬件，软件，协议三大部分组成
2. 从工作方式看，计算机网络分为边缘部分和核心部分。
   1. 边缘部分由所有连接到因特网，供用户直接使用的主机组成，用来通信和资源共享
   2. 核心部分由大量的网络和连接这些网络的路由器组成，它为边缘部分提供连通性和交换服务。
3. 从功能组成上看，计算机网络由通信子网和资源子网组成。
   1. 通信子网由各种传输介质，通信设备和相应的网络协议组成，它使网咯具有网络具有数据传输，交换，控制和存储的能力，实现互联网计算机之间的数据通信。
   2. 资源子网是实现资源共享功能的设备和软件的集合，向网络用户提供共享和其他计算机上的硬件资源，软件资源和数据资源的服务

#### 1.1.3 计算机网络的功能

1. 数据通信
2. 资源共享
3. 分布式处理
4. 提高可靠性
5. 负载均衡

#### 1.1.6 计算机网络的性能指标

- 带宽
- 时延
  - 总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延
- 时延带宽积
- 往返时延
- 吞吐量
- 速率
- 信道利用率

### 1.2 计算机网络体系结构与参考模型

#### 1.2.1 计算机网络分层结构

分层原则：

- 每层都实现一种相对独立的功能，降低大系统的复杂度
- 各层之间界面自然清晰，易于理解，相互交流尽可能少
- 各层功能的精确定义独立于具体的实现方法
- 保持下层对上层的独立性，上层单向使用下层提供的服务。
- 整个分层结构应能促进标准化工作。

每个层次中，报文分成两个部分：一个是数据部分，即SDU；二是控制信息部分，即PCI，它们共同组成PDU：

- 服务数据单元（SDU）：
- 协议控制信息（PCI）：
- 协议数据单元（PDU）：

#### 1.2.2 计算机网络协议、接口、服务的概念

1. **协议**

   控制两个（或多个）对等的实体进行通讯的规则的集合

   协议由语法、语义和同步（也叫时序）三部分完成

2. **接口**

   接口是同一结点内相邻两层之间交换信息的连接点，是一个系统内部的规定。每层只能为紧邻的层次之间定义接口，不能跨层定义接口。

3. **服务**
   服务是指下层为紧邻的上层提供的功能调用，它是垂直的。上层使用下层服务的时候，有些命令：

   1. 请求：由服务用户发往服务提供者，请求完成某项工作。
   2. 指示：由服务提供者发往服务用户，指示用户做某件事。
   3. 响应：由服务用户发往服务提供者，作为指示的响应。
   4. 证实：由服务提供者发我那个服务用户，作为请求的证实。

#### 1.2.3 ISO/OSI参考模型和TCP/IP模型

**OSI参考模型各层功能：**

- 物理层：
  - 传输单位：比特
  - 目的：透明的传输比特流。
  - 功能：在物理媒体上为数据端设备透明地传输原始比特流。
  - 协议：EIA-232C、EIA/TIA RS-449、CCITT的X.21等。
- 数据链路层
  - 传输单位：帧
  - 目的：将网络传输来的IP数据报装成帧。
  - 功能：成帧、差错控制、流量控制和传输管理等。
  - 协议：DSLC、HDLC、PPP、STP和帧中继等。
- 网络层
  - 传输单位：数据报
  - 目的：关心通信子网的运行控制，把网络层的协议数据单元（分组）从源端传到目的端，为分组交换网上的不同主机提供通信服务。
  - 功能：对分组进行路由选择，并实现流量控制、拥塞控制、差错控制和网际互联等功能。
  - 协议：IP、IPX、ICMP、IGMP、ARP、RARP和OSPF等。
- 传输层
  - 传输单位：报文段（TCP）或用户数据报（UDP）
  - 目的：负责主机中两个进程之间的通信。
  - 功能：为端到端连接提供可靠的传输服务，为端到端连接提供流量控制、差错控制、服务质量、数据传输管理服务等。
  - 协议：TCP、UDP。
- 会话层
  - 传输单位：
  - 目的：利用传输提供的端到端的服务，向表示层提供它的增值服务。
  - 功能：主要为表示层实体或用户进程建立连接，并在连接上有序地传输数据。
  - 协议：
- 表示层
  - 传输单位：
  - 目的：主要处理两个通信系统中交换信息的表示方式。
  - 功能：采用抽象的标准方法定义数据结构，并采用标准的编码形式。数据压缩。加密和解密也是表示层可提供的数据表示变换功能。
  - 协议：
- 应用层：
  - 传输单位：
  - 目的：为特定类型的网络应用提供访问OSI参考模型环境的手段。
  - 功能：
  - 协议：FTP、SMTP、HTTP等。

**TCP/IP模型**

分层：

- 网络接口层：
  - 传输单位：
  - 目的：
  - 功能：
  - 协议：
- 网际层：
  - 传输单位：
  - 目的：
  - 功能：
  - 协议：
- 传输层：
  - 传输单位：
  - 目的：
  - 功能：
  - 协议：
- 应用层：
  - 传输单位：
  - 目的：
  - 功能：
  - 协议：

**TCP/IP模型与OSI参考模型比较**

相同点：

1. 都采用分层体系结构。
2. 都是基于独立的协议栈。
3. 可以解决异构网络的互联。

不同点：

1. OSI精确地定义了三个主要概念：服务，协议，接口。而TCP/IP模型没有明确区分。
2. OSI在协议产生之前，所以不会偏袒任何协议，但是可能会出现与协议不匹配情况，TCP/IP模型在协议产生之后，所以会比较好适配。
3. TCP/IP在设计之初就考虑到了多种异构网络的互联问题，将网际协议（IP）作为单独一层。
4. OSI参考模型在网络层支持无连接和面向连接的通信，但在连接层只有面向连接的通信。TCP/IP模型可以认为可靠性是端到端的问题，因此它在网际层仅有一种无连接的通信模式，但是传输层支持无连接和面向连接两种模式。

### 1.3  章小结

## 第2章 物理层

### 2.1 通信基础

#### 2.1.1基本概念

**1. 数据、信号与码元**

1. 数据：传送信息的实体
2. 信号：数据的电气或电磁表现，数据在传输过程中表现的形式
   1. 模拟信号：连续变化的数据
   2. 数字信号：取值仅允许有限的几个离散值的数据（信号）
3. 码元：是指用一个固定波长的信号波形（数字脉冲）表示一位k进制数字，代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为k进制码元，该时长称为码元宽度，一个码元可以携带若干比特的信息量，比如在使用二进制编码的时候，只有两种不同的码元：一种代表0状态，一种代表1状态。

数据传输方式：

1. 串行传输：1比特1比特按照时间顺序传输
2. 并行传输：通过多个信道同时传输

**2. 信源、信道和信宿**

1. 信源：数据产生和发送的源头
2. 信道：数据传输的通道，是信号的传输媒介与电路不等同。
3. 信宿：接收数据的终点



**3. 速率、波特和带宽**

1. 速率：指的是数据传输率，单位时间内传输的数据量。可以用码元传输速率和信息传输速率表示。
   1. 码元传输速率：又称波特率，表示单位时间内数字通信系统所传输的码元个数（也可称为脉冲个数或信号变化次数），单位是波特（Baud），码元速率与进制数无关。
   2. 信息传输速率：表示单位时间内数字通信系统传输的二进制码元个数（即比特数），单位是比特/秒
2. 波特：码元传输速率：又称波特率，表示单位时间内数字通信系统所传输的码元个数（也可称为脉冲个数或信号变化次数），单位是波特（Baud），码元速率与进制数无关。
3. 带宽：信息传输速率：表示单位时间内数字通信系统传输的二进制码元个数（即比特数），单位是比特/秒

#### 2.1.2 奈奎斯特定理与香农定理

**奈奎斯特定理：**

奈奎斯特定理主要是针对码元传输率，在信道中，如果数据通过的频率大于信道所能接受的范围，那么就会导致接收到的码元波形之间失去清晰界限的问题。极限数据率公式：

理想低通信道下的极限数据传输速率 = 2Wlog_2 V（单位b/s）

**香农定理：**

香农定理给出了带宽受限且有高斯白噪声干扰的信道的极限数据率传输速率，当用此速率传输时，可以做到不产生误差。

信道的极限数据传输速率 = Wlog_2 (1 +S/N)（单位为b/s）

W为信道的带宽，S为信道传输信号的平均功率，N为信道内部的高斯噪声功率。S/N为信噪比，

结论：

1. 信道的带宽或信道中的信噪比越大，信息的极限传输速率越高
2. 对一定的传输带宽和一定的信噪比，信息传输速率的上限是确定的
3. 只要信息传输速率低于信道的传输极限速率，就能找到某种方法来实现无差错的传输
4. 香农定理得出的时极限信息传输速率，实际信道能达到的速率比它低不少。

#### 2.1.3 编码与调制

编码：把数据转变为数字信号称为编码

调制：把数据转变为模拟信号称为调制

1. 数字数据编码为数字信号

   1. 归零编码：1代表高电平，0代表低电平（或者相反），每个时钟的中间均跳到低电平（归零）。
   2. 非归零编码：与归零编码比较，就是不用归零。
   3. 反向非归零编码：信号翻转代表0，不变代表1，USB2.0使用这个，能够传输时钟信号。
   4. 曼彻斯特编码：一个码元分成两个相等的间隔，前一个间隔为高电平，后一个间隔为低电平表示码元1，码元0表示相反，使用带宽是基准带宽两倍，可以拥有时钟信号，以太网使用的编码方式就是这个
   5. 差分曼彻斯特编码：码元为1，则前半个码元的电平与上一个码元后半个码元电平相同，若码元为0则相反。抗干扰性好。

2. 数字数据调制为模拟信号

   基本的数字调制方法：

   1. 幅移键控（ASK）：改变载波信号的振幅来表示数字信号1或0，而载波的频率和相位都不改变。比较容易实现，抗干扰差。
   2. 频移键控（FSK）：改变载波信号的频率来表示数字1和0，而载波的振幅和相位都不改变，容易实现，抗干扰强。
   3. 相移键控（PSK）：改变载波信号的相位表示数字1和0，而载波的振幅和频率都不改变，容易实现。分为绝对调相和相对调相。
   4. 正交振幅调制（QAM）：在频率相同的情况下，将ASK和PSK结合起来，形成叠加信号。设波特率为B，采用，m个相位，每个相位有n种振幅，则该QAM技术的数据传输速率R=Blog_2(mn)，单位为b/s

3. 模拟数据编码为数字信号

   1. 采样
   2. 量化
   3. 编码

4. 模拟数据调制为模拟信号

   1. 采用FDM频分复用技术

#### 2.1.4 电路交换、报文交换与分组交换

##### 1.电路交换

三个阶段：连接建立，数据传输和连接释放

优点：

1. 通信时延小
2. 有序传输
3. 没有冲突
4. 适用范围广
5. 实时性强
6. 控制简单

缺点：

1. 建立连接时间长
2. 线路独占
3. 灵活性差
4. 难以规格化

##### 2. 报文交换

优点：

1. 无需建立连接
2. 动态分配线路
3. 提高线路可靠性
4. 提高线路利用率
5. 提供多目标服务

缺点：

1. 由于数据进入交换节点后需要存储和转发，因此会引起转发延时
2. 报文交换对报文没有大小限制，这就要求网络节点需要有较大的缓存空间。
3. 没有差错控制

##### 3. 分组交换

优点：

1. 无建立时延
2. 线路利用率高
3. 简化了存储管理
4. 加速传输
5. 减少了出错概率和重发数据量

缺点：

1. 存在传输时延
2. 需要额外的信息量
3. 当分组交换采用数据报服务时，可能会出现失序、丢失或重复分组，分组到达目的结点时，要对分组按编号进行排序等工作。采用虚电路服务，虽无失序问题，但会有呼叫建立、数据传输和虚电路释放三个过程。

#### 2.1.5 数据报与虚电路

虚电路方式视图将数据报方式与电路交换方式结合起来

|                    | 数据报服务                                                   | 虚电路服务                                               |
| ------------------ | ------------------------------------------------------------ | -------------------------------------------------------- |
| 连接的建立         | 不需要                                                       | 必须有                                                   |
| 目的地址           | 每个分组都有固定的目的地址                                   | 仅在建立连接阶段使用，之后每个分组使用长度较短的虚电路号 |
| 路由选择           | 每个分组独立地进行路由选择和转发                             | 属于同一条虚电路的分组按照同一路由转发                   |
| 分组顺序           | 不保证分组的有序到达                                         | 保证分组有序达到                                         |
| 可靠性             | 不保证可靠通信，可靠性由用户主机来保证                       | 可靠性由网络保证                                         |
| 对网络故障的适应性 | 出故障的结点丢失分组，其它分组路径选择发生变化时可以正常传输 | 所有经过故障结点的虚电路均不能正常工作                   |
| 差错处理和流量控制 | 由用户主机进行流量控制，不保证数据报的可靠性                 | 可由分组交换网负责，也可由用户主机负责                   |



### 2.2 传输介质

#### 2.2.1 双绞线、同轴电缆、光纤与无线传输介质

**1. 双绞线**

采用两根按照一定规则并排绞合的、相互绝缘的铜导线组成。绞合可以山少对相邻导线的电磁干扰，外层再加一层金属丝编织成的屏蔽层就是屏蔽双绞线（STP），无屏蔽层的双绞线称为非屏蔽双绞线（UTP）

常用于局域网和传统电话网，可以进行模拟传输和数字传输

**2. 同轴电缆**

同轴电缆由内导体、绝缘体、网状编织屏蔽层和塑料外层构成。按特性阻抗数值不同，分50欧同轴电缆和75欧同轴电缆。50欧同轴电缆传输基带数字信号，又称基带同轴电缆，在局域网中使用广泛。75欧同轴电缆主要用于产送宽带信号，又称宽带同轴电缆，主要用于有线电视系统。

抗干扰不错，传输速率较高，传输距离远，价格较贵

**3. 光纤**

通过光导纤维传递光脉冲传递信号。利用光的全反射特性，可以进行多条光线在同一条光纤中传输，称为多模光纤。多模光纤在长距离容易失真，所以适合近距离传输，光源是发光二极管

光纤直径小到只有一个光的波长，就可以使光一直向前传播，不会发送多次反射，这是单模光纤，需要半导体激光器，传输衰弱较小可以传播数十千米而不必采用中继器，适合远距离传输。特点如下

1. 传输损耗小，中继距离长，对远距离传输特别经济
2. 抗雷电和电磁干扰性能好。
3. 无串音干扰，保密性好
4. 体积小。重量轻

**4. 无线传输介质**

1. 无线电波：穿透能力强，可以传输长距离，向所有方向散播，无需对准某一方向
2. 微波、红外线和激光
   1. 高带宽的无线通信主要的三种技术；都需要发送方和接收方之间存在一条视线通路，有很强的方向性，都沿直线传播
   2. 红外通信和激光通信需要把传输的信号分别转成各自的信号格式，再直接在空间中传播
   3. 微波通信频率高，频段范围宽，2-40GHz，沿直线传播。卫星通信利用地球同步卫星作为中继来转发微波信号，克服地面微波通信距离的限制。

#### 2.2.2 物理层接口的特性：

1. 机械特性：指明接口所用接线器的形状和尺寸、引脚数和排列、固定和锁定装置等
2. 电气特性：指明在接口电缆的各条线上出现的电压的范围。
3. 功能特性：指明某条线上出现的某一电平和电压表示何种意义
4. 过程特性：或称规程特性。指明对于不同功能的各种可能事件的出现顺序。

常用的物理层接口标准：EIARS-232-C、ADSL和SONET/SDK等

### 2.3 物理层设备

#### 2.3.1 中继器

中继器的主要功能是将信号整形并放大再转发出去，以消除信号经过一长段电缆后而产生的失真和衰减。原理是再生（而非简单地将衰减信号放大）。端口进作用信号的电气部分。数据从一个端口输入，再从另一个端口发出。

中继器两端的网络部分是网段，而不是子网，仍是属于一个局域网。中继器工作在物理层，因此它不能连接两个具有不同速率的局域网。中继器没有存储转发功能。

在10BASE5以太网规范中，互相串联的中继器不能超过4个，且5段通信介质中只有3段可以挂接计算机，其余两端同于作扩展通讯范围的链路段

中继器传输数字信号；放大器传输模拟信号

#### 2.3.2集线器（Hub）

实质是有多个端口的集线器。一个端口接收到数据信号后，Hun整形放大后，转发到非接收端口之外的所有端口。如果两个及以上端口输入，那么输出会发送冲突，导致数据无效。

Hub主要使用双绞线工作组建共享网络，而且Hub作为中心结点，如果n台设备同时通信，导致每台设备平均带宽实际为Hub支持的带宽/n台设备。

Hub组成的网络部分是同一网络的不同网段，Hub只能半双工工作。

### 2.4 章小结

**1. 基带传输、频带传输和宽带传输这三者区别**

1. 基带传输：在计算机内部或在相邻设备之间近距离传输时，可以不经过调制就在信道上直接进行的传输方式叫基带传输，主要用于局域网
2. 频带传输：用数字信号对特定频率的载波进行调制（数字调制），将其变成适合于传送的信号后在进行传输。
3. 宽带传输：借助频带传输，可以将链路容量分解成两个或多个信道，每个信道可以携带不同的信号，这就是宽带传输。

## 第3章 数据链路层

### 3.1 数据链路层的功能

数据链路层在物理层提供服务的基础上向网络层提供服务，其主要作用是加强物理层传输原始比特流的功能，将物理层提供的可能出错的物理连接改造为逻辑上无差错的数据链路，使对网络层表现为一条无差错的链路。

#### 3.1.1 为网络层提供服务

为网络层提供的服务：

1. 无确认的无连接服务
2. 有确认的无连接服务
3. 有确认的面向连接服务

#### 3.1.2 链路管理

数据链路层连接的建立、维持和释放过程称为链路管理，主要用于面向连接服务。在多个站点共享一个物理信道的情况下，如何要求通信的站点间分配和管理信道也属于数据链路层管理的范畴。

#### 3.1.3 帧定界、帧同步与透明传输

两台主句之间传输信息时，必须将网络层的分组封装成帧，以帧的格式进行传送。将一段数据的前后分别添加首部和尾部就构成了帧。首部和尾部有很多控制信息，其中一个作用就是帧定界。

帧同步是指接收方应能从接收到的二进制比特流中区分帧的起始与终止。例如在HDLC协议中，用标识F来标识帧的开始和节数。为了提高帧的传输效率，帧的部分应该足够大，但是每种数据链路层协议都规定了帧的数据部分的长度上线，最大传输单元（MTU）

透明传输是指不管所传数据是什么样比特组合，都能在链路上传送。因为防止拥有类似结束标识F的比特组合被误认为是结束标志导致帧数据被截断不完整。

#### 3.1.4 流量控制

接收方和发送方的传输速度不一致问题，需要流量进行控制。否则如果接收方接收速度比发送方发送速度慢，会出现接收的帧会被覆盖。

流量控制中，数据链路层是相邻两结点之间数据链路上的流量控制，而运输层控制的是源端到目的端之间的流量。

在OSI体系中，数据链路层具有流量控制的功能，而在TCP/IP体系结构中，流量控制功能被移到了传输层。

#### 3.1.5 差错控制

由于信道噪声等各种原因，帧在传输过程中可能出现错误。用以使发送方确定接收方是否正确接收到由其发送的数据的方法称为差错控制。通常分为位错和帧错。

位错是帧中某些位出现了差错。通常采用循环冗余位（CRC）方式发现位错，通过自动重连请求（ARQ）方式来重传出错的帧。

帧错是指帧的丢失、重复或失序等错误。在数据链路层定时引入定时器和编号机制，保证每一帧最终都能有且有一次正确地交付给目的的结点。

### 3.2 组帧

数据链路层之所以要把比特组合成帧为单位传输，是为了在出错时只重发出错的帧，不用重发所有数据从而提高效率。为了使接收方能够正确接收并检查所传输的帧，发送方必须依据一定规则把网络层递交的分组封装成帧（称为组帧），主要解决帧定界、帧同步、透明传输等问题。

#### 3.2.1 字符计数法

字符计数法是指在帧头部使用一个计数字段来标明帧内字符数。如果计数字段出错，那么就会无法获取正确的结束位和下一帧开始位。

#### 3.2.2字符串填充的首尾定界符法

使用特定字符来定界一帧的开始和结束。而数据部分如果也有特定字符，那么可以在这些特定字符前加入转移字符，包括有转移字符也是前面加载转义字符。

#### 3.2.3 零比特填充的首尾标志法

通过使用01111110来标志帧的开始和结束，但是如果数据部分存在01111110可能会造成误判，那么可以在数据部分中连续11111之后自动插入0，接收方在接收后，自动去除数据部分中11111之后的0。性能优于字符串填充法。

#### 3.2.4 违规编码法

物理层编码时候，0和1的电平不同，在曼彻斯特编码中分别用低高电平和高低电平表示。对于高高电平和低低电平，没有使用，在数据上是违规的。借用这些违规编码来界定帧的起始和结束。局域网IEEE802采用了这种方法。

### 3.3 差错控制

比特差错是在传输过程中，1可能变0，0可能变1。比特差错是传输差错中的一种。

通常利用编码技术进行差错控制，主要有两类：自动重传请求（ARQ）和前向纠错FEC。在ARQ方式中，如果接收端检测到差错时，就设法通知发送端重发，直到接收正确的码字为止。在FEC方式中，接收端不但能发现差错，而且能确定比特串的错误位置，从而加以纠正。因此差错控制可以分为**检错编码**和**纠错编码**。

#### 3.3.1 检错编码

检错编码采用冗余编码技术。

**1. 奇偶校验码**

n-1个信息元和1个校验元组成。奇校验位和偶校验位分别表示，n个码元中1的个数是奇数和偶数

**2. 循环冗余码**

一个帧有m位，其对应的多项式为M(x)，计算冗余的步骤如下。

1. 加0.假设G(x)的阶位r，在帧的低位加上r个0
2. 模2除。利用模2除法，用G(x)对应的数据串去除第1步中计算出的数据串，得到的余数即是冗余码。（共r位，前面0不可省略）

循环冗余码CRC有纠错功能的。

#### 3.3.2 纠错编码

常见的纠错编码是海明码，原理是在有效信息位中加入几个校验位形成海明码，并把海明码的每个二进制位分配到几个奇偶校验组中。当某一位出错后，就会引起有关几个校验位的值发生变化，这不但可以发现错位，而且能指出错位的位置，为自动纠错提供依据。

**海明码计算过程参考王道书籍**

### 3.4 流量控制与可靠传输机制

#### 3.4.1 流量控制、可靠传输与滑动窗口机制

流量控制主要是由接收方控制发送方发送速度的速率，常见的方法有两种：

**1. 停止-等待流量控制基本原理**

通过每发送一帧，就得接收一帧的响应才能进行下一帧发送。效率低

**2. 滑动窗口流量控制基本原理**

通过窗口方式，其实类似于缓存的方式，发送一批数据后，进行等待确认，能够让每帧的发送等待间隔减少

特性：

1. 只有接收窗口向前移动（同时接收方发送了确认帧）时，发送窗口才有可能（只有发送方收到确认帧后才一定）向前滑动
2. 从滑动窗口概念看，停止-等待协议、后退N帧协议和选择重传协议只在发送窗口大小与接收窗口大小上有所差别：
   1. 停止-等待协议：发送窗口大小=1，接收窗口大小等于1
   2. 后退N帧协议：发送窗口大小大于1，接收窗口大小等于1
   3. 选择重传协议：发送窗口大小大于1，接收窗口大小大于1
3. 接收窗口的大小为1时，可以保证帧的有序接收
4. 数据链路层的滑动窗口协议中，窗口的大小在传输过程中是固定的（与传输层的滑动窗口协议不一样）

**3. 可靠的传输机制**

数据链路层的可靠传输通常使用确认和超时重传两种机制来完成。

确认是一种无数据的控制帧，携带接收方关于接收帧的信息。可以将确认捎带在回复帧上，称为捎带确认。

超时重发是通过计时器来设置某个帧发送后，超过一定时间没有得到确认帧，那就重新发送该数据帧。

自动重传请求（ARQ）通过接收方请求发送方重传出错的数据帧来恢复出错的帧。传统自动重传请求分为三种：

1. 停止-等待（wait-stop）ARQ
2. 后退N帧（Go-Back-N）ARQ
3. 选择性重传（Selective Repeat）ARQ

后两种协议是滑动窗口技术和重发请求技术的结合。

#### 3.4.2 单帧滑动窗口与停止-等待协议

停止等待协议中除了数据帧丢失外，还可能出现的两种差错：

1. 帧被破坏，接收方差错校验后丢弃，这时候需要发送方有计时器进行重发
2. 数据帧正确，确认帧被破坏。发送方接收不到确认帧后，也会重传该数据帧（接收方收到后会丢弃该帧，并重发确认帧），直到发送方接收正确的确认帧。

发送方和接收方都要有一个帧缓冲区。用于保证出现差错时能够重传。

#### 3.4.3 多帧滑动窗口与后退N帧协议（GBN）

发送方可以连续发送多帧，但是接收方需要保证顺序接收，如果不是顺序接收或者存在某帧超时，则，发送方需要重发超时帧以及之后的所有帧或者在收到最后一个确认帧的位置之后的所有帧。

发送方窗口尺寸大小满足 1<= W <= 2^n-1，n为帧编号比特位数，超过W大小超过会导致无法区分新帧和旧帧。

信道的传输质量很差导致误码率较大时候，效率不如停止-等待协议。重传时需要把后面正确传送的帧也要重新发送，效率也会导致低。

#### 3.4.4 多帧滑动窗口与选择重传协议（SR）

接收方窗口大于1，能够在某个时间段内接收不连续的帧，等到所缺序号都到达后，一并交给主机。

如果接收方接收到可疑帧，会发送一个NAK给发送方，要求发送方重发该帧。发送和接收的滑动窗口最好大小相等。帧编号比特位为n，则WTMax = WRMax = 2^(n-1)。如果窗口范围大小大于范围一半，接收方可能会无法分分辨是新的数据帧还是重传的数据帧。 



信道的效率也叫信道利用率 = （一个发送周期的发送数据量L/发送方数据传速率C)/一个发送周期T

信道吞吐率 = =信道利用率x发送方的发送速率

### 3.5 介质访问控制

介质访问控制主要完成的任务是，为使用介质的每个结点隔离来自同一信道上其它结点所传递的信号，以协调活动结点的传输。来决定广播信道中信道分配的协议属于数据链路层的一个子层，称为介质访问控制（MAC）子层。

介质访问控制的内容是，采取一定措施，使得两对结点之间的通信不会发生互相干扰的情况。

常见的介质访问控制方法有信道划分介质访问控制、随机访问介质访问控制和轮询访问介质访问控制。前者是静态划分信道的方法，后两者是动态分配信道方法。

#### 3.5.1 信道划分介质访问控制

信道划分介质访问控制分为以下4种：

**1. 频分多路复用（FDM）**

**2. 时分多路复用（TDM）**

**3. 波分多路复用（WDM）**

**4. 码分多路复用（CDM）**

#### 3.5.2 随机访问介质访问控制

随机访问介质访问控制协议又称争用型协议

**1. ALOHA协议**

**2. CSMA协议**

**3. CSMA/CD协议**

**4. CSMA/CA协议**



#### 3.5.3 轮询访问：令牌传递协议

### 3.6 局域网

#### 3.6.1 局域网的基本概念和体系结构

#### 3.6.2 以太网与IEEE802.3

#### 3.6.3 IEEE802.11 无线局域网

#### 3.6.4 VLAN基本概念与基本原理

### 3.7 广域网

#### 3.7.1 广域网基本概念

#### 3.7.2 PPP协议

#### 3.7.3 HDLC协议

### 3.8 数据链路层设备

#### 3.8.1 网桥的基本概念

#### 3.8.2 局域网交换机

### 3.9 章小结

## 第4章 网络层

## 第5章 传输层

## 第6章 应用层

​                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        