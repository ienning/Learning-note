[TOC]

# 计网

## 第1章 计算机网络体系结构

### 1.1 计算机网络概述

#### 1.1.1 计算机网络的概念

计算机网络是一些互联的，自治的计算机系统的集合。

#### 1.1.2 计算机网络的组成

1. 从组成部分看，一个完整的计算机网络主要由硬件，软件，协议三大部分组成
2. 从工作方式看，计算机网络分为边缘部分和核心部分。
   1. 边缘部分由所有连接到因特网，供用户直接使用的主机组成，用来通信和资源共享
   2. 核心部分由大量的网络和连接这些网络的路由器组成，它为边缘部分提供连通性和交换服务。
3. 从功能组成上看，计算机网络由通信子网和资源子网组成。
   1. 通信子网由各种传输介质，通信设备和相应的网络协议组成，它使网咯具有网络具有数据传输，交换，控制和存储的能力，实现互联网计算机之间的数据通信。
   2. 资源子网是实现资源共享功能的设备和软件的集合，向网络用户提供共享和其他计算机上的硬件资源，软件资源和数据资源的服务

#### 1.1.3 计算机网络的功能

1. 数据通信
2. 资源共享
3. 分布式处理
4. 提高可靠性
5. 负载均衡

#### 1.1.6 计算机网络的性能指标

- 带宽
- 时延
  - 总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延
- 时延带宽积
- 往返时延
- 吞吐量
- 速率
- 信道利用率

### 1.2 计算机网络体系结构与参考模型

#### 1.2.1 计算机网络分层结构

分层原则：

- 每层都实现一种相对独立的功能，降低大系统的复杂度
- 各层之间界面自然清晰，易于理解，相互交流尽可能少
- 各层功能的精确定义独立于具体的实现方法
- 保持下层对上层的独立性，上层单向使用下层提供的服务。
- 整个分层结构应能促进标准化工作。

每个层次中，报文分成两个部分：一个是数据部分，即SDU；二是控制信息部分，即PCI，它们共同组成PDU：

- 服务数据单元（SDU）：
- 协议控制信息（PCI）：
- 协议数据单元（PDU）：

#### 1.2.2 计算机网络协议、接口、服务的概念

1. **协议**

   控制两个（或多个）对等的实体进行通讯的规则的集合

   协议由语法、语义和同步（也叫时序）三部分完成

2. **接口**

   接口是同一结点内相邻两层之间交换信息的连接点，是一个系统内部的规定。每层只能为紧邻的层次之间定义接口，不能跨层定义接口。

3. **服务**
   服务是指下层为紧邻的上层提供的功能调用，它是垂直的。上层使用下层服务的时候，有些命令：

   1. 请求：由服务用户发往服务提供者，请求完成某项工作。
   2. 指示：由服务提供者发往服务用户，指示用户做某件事。
   3. 响应：由服务用户发往服务提供者，作为指示的响应。
   4. 证实：由服务提供者发我那个服务用户，作为请求的证实。

#### 1.2.3 ISO/OSI参考模型和TCP/IP模型

**OSI参考模型各层功能：**

- 物理层：
  - 传输单位：比特
  - 目的：透明的传输比特流。
  - 功能：在物理媒体上为数据端设备透明地传输原始比特流。
  - 协议：EIA-232C、EIA/TIA RS-449、CCITT的X.21等。
- 数据链路层
  - 传输单位：帧
  - 目的：将网络传输来的IP数据报装成帧。
  - 功能：成帧、差错控制、流量控制和传输管理等。
  - 协议：DSLC、HDLC、PPP、STP和帧中继等。
- 网络层
  - 传输单位：数据报
  - 目的：关心通信子网的运行控制，把网络层的协议数据单元（分组）从源端传到目的端，为分组交换网上的不同主机提供通信服务。
  - 功能：对分组进行路由选择，并实现流量控制、拥塞控制、差错控制和网际互联等功能。
  - 协议：IP、IPX、ICMP、IGMP、ARP、RARP和OSPF等。
- 传输层
  - 传输单位：报文段（TCP）或用户数据报（UDP）
  - 目的：负责主机中两个进程之间的通信。
  - 功能：为端到端连接提供可靠的传输服务，为端到端连接提供流量控制、差错控制、服务质量、数据传输管理服务等。
  - 协议：TCP、UDP。
- 会话层
  - 传输单位：
  - 目的：利用传输提供的端到端的服务，向表示层提供它的增值服务。
  - 功能：主要为表示层实体或用户进程建立连接，并在连接上有序地传输数据。
  - 协议：
- 表示层
  - 传输单位：
  - 目的：主要处理两个通信系统中交换信息的表示方式。
  - 功能：采用抽象的标准方法定义数据结构，并采用标准的编码形式。数据压缩。加密和解密也是表示层可提供的数据表示变换功能。
  - 协议：
- 应用层：
  - 传输单位：
  - 目的：为特定类型的网络应用提供访问OSI参考模型环境的手段。
  - 功能：
  - 协议：FTP、SMTP、HTTP等。

**TCP/IP模型**

分层：

- 网络接口层：
  - 传输单位：
  - 目的：
  - 功能：
  - 协议：
- 网际层：
  - 传输单位：
  - 目的：
  - 功能：
  - 协议：
- 传输层：
  - 传输单位：
  - 目的：
  - 功能：
  - 协议：
- 应用层：
  - 传输单位：
  - 目的：
  - 功能：
  - 协议：

**TCP/IP模型与OSI参考模型比较**

相同点：

1. 都采用分层体系结构。
2. 都是基于独立的协议栈。
3. 可以解决异构网络的互联。

不同点：

1. OSI精确地定义了三个主要概念：服务，协议，接口。而TCP/IP模型没有明确区分。
2. OSI在协议产生之前，所以不会偏袒任何协议，但是可能会出现与协议不匹配情况，TCP/IP模型在协议产生之后，所以会比较好适配。
3. TCP/IP在设计之初就考虑到了多种异构网络的互联问题，将网际协议（IP）作为单独一层。
4. OSI参考模型在网络层支持无连接和面向连接的通信，但在连接层只有面向连接的通信。TCP/IP模型可以认为可靠性是端到端的问题，因此它在网际层仅有一种无连接的通信模式，但是传输层支持无连接和面向连接两种模式。

### 1.3  章小结

## 第2章 物理层

### 2.1 通信基础

#### 2.1.1基本概念

**1. 数据、信号与码元**

1. 数据：传送信息的实体
2. 信号：数据的电气或电磁表现，数据在传输过程中表现的形式
   1. 模拟信号：连续变化的数据
   2. 数字信号：取值仅允许有限的几个离散值的数据（信号）
3. 码元：是指用一个固定波长的信号波形（数字脉冲）表示一位k进制数字，代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为k进制码元，该时长称为码元宽度，一个码元可以携带若干比特的信息量，比如在使用二进制编码的时候，只有两种不同的码元：一种代表0状态，一种代表1状态。

数据传输方式：

1. 串行传输：1比特1比特按照时间顺序传输
2. 并行传输：通过多个信道同时传输

**2. 信源、信道和信宿**

1. 信源：数据产生和发送的源头
2. 信道：数据传输的通道，是信号的传输媒介与电路不等同。
3. 信宿：接收数据的终点



**3. 速率、波特和带宽**

1. 速率：指的是数据传输率，单位时间内传输的数据量。可以用码元传输速率和信息传输速率表示。
   1. 码元传输速率：又称波特率，表示单位时间内数字通信系统所传输的码元个数（也可称为脉冲个数或信号变化次数），单位是波特（Baud），码元速率与进制数无关。
   2. 信息传输速率：表示单位时间内数字通信系统传输的二进制码元个数（即比特数），单位是比特/秒
2. 波特：码元传输速率：又称波特率，表示单位时间内数字通信系统所传输的码元个数（也可称为脉冲个数或信号变化次数），单位是波特（Baud），码元速率与进制数无关。
3. 带宽：信息传输速率：表示单位时间内数字通信系统传输的二进制码元个数（即比特数），单位是比特/秒

#### 2.1.2 奈奎斯特定理与香农定理

**奈奎斯特定理：**

奈奎斯特定理主要是针对码元传输率，在信道中，如果数据通过的频率大于信道所能接受的范围，那么就会导致接收到的码元波形之间失去清晰界限的问题。极限数据率公式：

理想低通信道下的极限数据传输速率 = 2Wlog_2 V（单位b/s）

**香农定理：**

香农定理给出了带宽受限且有高斯白噪声干扰的信道的极限数据率传输速率，当用此速率传输时，可以做到不产生误差。

信道的极限数据传输速率 = Wlog_2 (1 +S/N)（单位为b/s）

W为信道的带宽，S为信道传输信号的平均功率，N为信道内部的高斯噪声功率。S/N为信噪比，

结论：

1. 信道的带宽或信道中的信噪比越大，信息的极限传输速率越高
2. 对一定的传输带宽和一定的信噪比，信息传输速率的上限是确定的
3. 只要信息传输速率低于信道的传输极限速率，就能找到某种方法来实现无差错的传输
4. 香农定理得出的时极限信息传输速率，实际信道能达到的速率比它低不少。

#### 2.1.3 编码与调制

编码：把数据转变为数字信号称为编码

调制：把数据转变为模拟信号称为调制

1. 数字数据编码为数字信号

   1. 归零编码：1代表高电平，0代表低电平（或者相反），每个时钟的中间均跳到低电平（归零）。
   2. 非归零编码：与归零编码比较，就是不用归零。
   3. 反向非归零编码：信号翻转代表0，不变代表1，USB2.0使用这个，能够传输时钟信号。
   4. 曼彻斯特编码：一个码元分成两个相等的间隔，前一个间隔为高电平，后一个间隔为低电平表示码元1，码元0表示相反，使用带宽是基准带宽两倍，可以拥有时钟信号，以太网使用的编码方式就是这个
   5. 差分曼彻斯特编码：码元为1，则前半个码元的电平与上一个码元后半个码元电平相同，若码元为0则相反。抗干扰性好。

2. 数字数据调制为模拟信号

   基本的数字调制方法：

   1. 幅移键控（ASK）：改变载波信号的振幅来表示数字信号1或0，而载波的频率和相位都不改变。比较容易实现，抗干扰差。
   2. 频移键控（FSK）：改变载波信号的频率来表示数字1和0，而载波的振幅和相位都不改变，容易实现，抗干扰强。
   3. 相移键控（PSK）：改变载波信号的相位表示数字1和0，而载波的振幅和频率都不改变，容易实现。分为绝对调相和相对调相。
   4. 正交振幅调制（QAM）：在频率相同的情况下，将ASK和PSK结合起来，形成叠加信号。设波特率为B，采用，m个相位，每个相位有n种振幅，则该QAM技术的数据传输速率R=Blog_2(mn)，单位为b/s

3. 模拟数据编码为数字信号

   1. 采样
   2. 量化
   3. 编码

4. 模拟数据调制为模拟信号

   1. 采用FDM频分复用技术

#### 2.1.4 电路交换、报文交换与分组交换

##### 1.电路交换

三个阶段：连接建立，数据传输和连接释放

优点：

1. 通信时延小
2. 有序传输
3. 没有冲突
4. 适用范围广
5. 实时性强
6. 控制简单

缺点：

1. 建立连接时间长
2. 线路独占
3. 灵活性差
4. 难以规格化

##### 2. 报文交换

优点：

1. 无需建立连接
2. 动态分配线路
3. 提高线路可靠性
4. 提高线路利用率
5. 提供多目标服务

缺点：

1. 由于数据进入交换节点后需要存储和转发，因此会引起转发延时
2. 报文交换对报文没有大小限制，这就要求网络节点需要有较大的缓存空间。
3. 没有差错控制

##### 3. 分组交换

优点：

1. 无建立时延
2. 线路利用率高
3. 简化了存储管理
4. 加速传输
5. 减少了出错概率和重发数据量

缺点：

1. 存在传输时延
2. 需要额外的信息量
3. 当分组交换采用数据报服务时，可能会出现失序、丢失或重复分组，分组到达目的结点时，要对分组按编号进行排序等工作。采用虚电路服务，虽无失序问题，但会有呼叫建立、数据传输和虚电路释放三个过程。

#### 2.1.5 数据报与虚电路

虚电路方式视图将数据报方式与电路交换方式结合起来

|                    | 数据报服务                                                   | 虚电路服务                                               |
| ------------------ | ------------------------------------------------------------ | -------------------------------------------------------- |
| 连接的建立         | 不需要                                                       | 必须有                                                   |
| 目的地址           | 每个分组都有固定的目的地址                                   | 仅在建立连接阶段使用，之后每个分组使用长度较短的虚电路号 |
| 路由选择           | 每个分组独立地进行路由选择和转发                             | 属于同一条虚电路的分组按照同一路由转发                   |
| 分组顺序           | 不保证分组的有序到达                                         | 保证分组有序达到                                         |
| 可靠性             | 不保证可靠通信，可靠性由用户主机来保证                       | 可靠性由网络保证                                         |
| 对网络故障的适应性 | 出故障的结点丢失分组，其它分组路径选择发生变化时可以正常传输 | 所有经过故障结点的虚电路均不能正常工作                   |
| 差错处理和流量控制 | 由用户主机进行流量控制，不保证数据报的可靠性                 | 可由分组交换网负责，也可由用户主机负责                   |



### 2.2 传输介质

#### 2.2.1 双绞线、同轴电缆、光纤与无线传输介质

**1. 双绞线**

采用两根按照一定规则并排绞合的、相互绝缘的铜导线组成。绞合可以山少对相邻导线的电磁干扰，外层再加一层金属丝编织成的屏蔽层就是屏蔽双绞线（STP），无屏蔽层的双绞线称为非屏蔽双绞线（UTP）

常用于局域网和传统电话网，可以进行模拟传输和数字传输

**2. 同轴电缆**

同轴电缆由内导体、绝缘体、网状编织屏蔽层和塑料外层构成。按特性阻抗数值不同，分50欧同轴电缆和75欧同轴电缆。50欧同轴电缆传输基带数字信号，又称基带同轴电缆，在局域网中使用广泛。75欧同轴电缆主要用于产送宽带信号，又称宽带同轴电缆，主要用于有线电视系统。

抗干扰不错，传输速率较高，传输距离远，价格较贵

**3. 光纤**

通过光导纤维传递光脉冲传递信号。利用光的全反射特性，可以进行多条光线在同一条光纤中传输，称为多模光纤。多模光纤在长距离容易失真，所以适合近距离传输，光源是发光二极管

光纤直径小到只有一个光的波长，就可以使光一直向前传播，不会发送多次反射，这是单模光纤，需要半导体激光器，传输衰弱较小可以传播数十千米而不必采用中继器，适合远距离传输。特点如下

1. 传输损耗小，中继距离长，对远距离传输特别经济
2. 抗雷电和电磁干扰性能好。
3. 无串音干扰，保密性好
4. 体积小。重量轻

**4. 无线传输介质**

1. 无线电波：穿透能力强，可以传输长距离，向所有方向散播，无需对准某一方向
2. 微波、红外线和激光
   1. 高带宽的无线通信主要的三种技术；都需要发送方和接收方之间存在一条视线通路，有很强的方向性，都沿直线传播
   2. 红外通信和激光通信需要把传输的信号分别转成各自的信号格式，再直接在空间中传播
   3. 微波通信频率高，频段范围宽，2-40GHz，沿直线传播。卫星通信利用地球同步卫星作为中继来转发微波信号，克服地面微波通信距离的限制。

#### 2.2.2 物理层接口的特性：

1. 机械特性：指明接口所用接线器的形状和尺寸、引脚数和排列、固定和锁定装置等
2. 电气特性：指明在接口电缆的各条线上出现的电压的范围。
3. 功能特性：指明某条线上出现的某一电平和电压表示何种意义
4. 过程特性：或称规程特性。指明对于不同功能的各种可能事件的出现顺序。

常用的物理层接口标准：EIARS-232-C、ADSL和SONET/SDK等

### 2.3 物理层设备

#### 2.3.1 中继器

中继器的主要功能是将信号整形并放大再转发出去，以消除信号经过一长段电缆后而产生的失真和衰减。原理是再生（而非简单地将衰减信号放大）。端口进作用信号的电气部分。数据从一个端口输入，再从另一个端口发出。

中继器两端的网络部分是网段，而不是子网，仍是属于一个局域网。中继器工作在物理层，因此它不能连接两个具有不同速率的局域网。中继器没有存储转发功能。

在10BASE5以太网规范中，互相串联的中继器不能超过4个，且5段通信介质中只有3段可以挂接计算机，其余两端同于作扩展通讯范围的链路段

中继器传输数字信号；放大器传输模拟信号

#### 2.3.2集线器（Hub）

实质是有多个端口的集线器。一个端口接收到数据信号后，Hun整形放大后，转发到非接收端口之外的所有端口。如果两个及以上端口输入，那么输出会发送冲突，导致数据无效。

Hub主要使用双绞线工作组建共享网络，而且Hub作为中心结点，如果n台设备同时通信，导致每台设备平均带宽实际为Hub支持的带宽/n台设备。

Hub组成的网络部分是同一网络的不同网段，Hub只能半双工工作。

### 2.4 章小结

**1. 基带传输、频带传输和宽带传输这三者区别**

1. 基带传输：在计算机内部或在相邻设备之间近距离传输时，可以不经过调制就在信道上直接进行的传输方式叫基带传输，主要用于局域网
2. 频带传输：用数字信号对特定频率的载波进行调制（数字调制），将其变成适合于传送的信号后在进行传输。
3. 宽带传输：借助频带传输，可以将链路容量分解成两个或多个信道，每个信道可以携带不同的信号，这就是宽带传输。

## 第3章 数据链路层

### 3.1 数据链路层的功能

### 3.2 组帧

### 3.3 差错控制

### 3.4 流量控制与可靠传输机制

### 3.5 介质访问控制

### 3.6 局域网

### 3.7 广域网

### 3.8 数据链路层设备

### 3.9 章小结

## 第4章 网络层

## 第5章 传输层

## 第6章 应用层

​                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        